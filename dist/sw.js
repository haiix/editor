(()=>{"use strict";(new class{constructor(){this.namespace=location.pathname.slice(1,location.pathname.lastIndexOf("/")),this.base=location.protocol+"//"+location.host+"/"+this.namespace+"/",this.dbSchema={name:this.namespace,version:1,onupgradeneeded(e,t,n){n<1&&e.createObjectStore("files",{keyPath:"path"})}}}main(){self.addEventListener("fetch",(e=>{e.respondWith(this.createResponse(e.request.url))}))}async createResponse(e){const t=this.base+"debug/";if((e+"/").startsWith(t)){e=e.split("?")[0].split("#")[0];const n=await async function(n,s,o,r){const a=await function({name:e="",version:t=1,onupgradeneeded:n=null}){return new Promise(((s,o)=>{const r=self.indexedDB.open(e,t);r.onupgradeneeded=e=>{try{n(r.result,r.transaction,e.oldVersion)}catch(e){o(e)}},r.onsuccess=e=>{s(r.result)},r.onerror=e=>{o(e.target.error)}}))}(n);return await new Promise(((n,o)=>{let r;const c=a.transaction(s,"readonly");c.oncomplete=e=>{a.close(),n(r)},c.onerror=e=>{a.close(),o(e.target.error)};try{r=(n=>function({index:e,range:t=null,direction:n="next",forEach:s}){return new Promise(((o,r)=>{let a;const c=e.openCursor(t,n);c.onsuccess=e=>{const t=c.result;if(t){try{a=s(t.value,t)}catch(e){r(e)}t.advance(void 0===a?1:4294967295)}else o(a)},c.onerror=e=>{r(e.target.error)}}))}({index:n.objectStore("files").index("path"),range:IDBKeyRange.only(e.slice(t.length)+("/"===e.slice(-1)?"index.html":"")),forEach:e=>e}))(c)}catch(e){c.abort(),a.close(),o(e)}}))}(this.dbSchema,["files"]);return n?n.file?new Response(n.file):new Response(null,{status:301,headers:{Location:e+"/"}}):new Response(null,{status:404})}return fetch(e)}}).main()})();