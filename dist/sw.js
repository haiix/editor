(()=>{"use strict";(new class{constructor(){this.namespace=location.pathname.slice(1,location.pathname.lastIndexOf("/")),this.base=location.protocol+"//"+location.host+"/"+(""===this.namespace?"":this.namespace+"/"),this.dbSchema={name:this.namespace,version:1,onupgradeneeded(e,s,t){t<1&&e.createObjectStore("files",{keyPath:"path"})}}}main(){const e=this.base;self.addEventListener("install",(s=>{console.log("2025-03-24T09:22:56.462Z"),s.waitUntil(async function(s){const t=[e,e+"dist/77.js",e+"dist/100.js",e+"dist/180.js",e+"dist/355.js",e+"dist/392.js",e+"dist/394.js",e+"dist/550.js",e+"dist/569.js",e+"dist/614.js",e+"dist/628.js",e+"dist/658.js",e+"dist/745.js",e+"dist/830.js",e+"dist/843.js",e+"dist/958.js",e+"dist/css.worker.js",e+"dist/editor.worker.js",e+"dist/f6283f7ccaed1249d9eb.ttf",e+"dist/html.worker.js",e+"dist/main.js",e+"dist/ts.worker.js",e+"resources/app.webmanifest",e+"resources/blank.txt",e+"resources/icons/icon-32.png",e+"resources/icons/icon-192.png",e+"resources/icons/icon-512.png",e+"resources/vendor/MaterialIcons-Regular.ttf"],n=await caches.open(s.namespace);await n.addAll(t)}(this))})),self.addEventListener("fetch",(e=>{e.respondWith(this.createResponse(e.request))}))}async createResponse(e){const s=this.base+"debug/";if((e.url+"/").startsWith(s)){let t=self.decodeURI(e.url).split("?")[0].split("#")[0],n=await this.getFileData(s,t);n||"/"===t.slice(-1)||t.slice(t.lastIndexOf("/")+1).includes(".")||(t+=".ts",n=await this.getFileData(s,t));let a=null,i=null;return n?n.file?a=n.distFile??n.file:i={status:301,headers:{Location:t+"/"}}:i={status:404},new Response(a,i)}{const s=await caches.open(this.namespace);return await s.match(e)??await fetch(e)}}getFileData(e,s){return async function(t,n){const a=await function({name:e="",version:s,onupgradeneeded:t=null}){return new Promise(((n,a)=>{const i=self.indexedDB.open(e,s);i.onupgradeneeded=e=>{try{t&&t(i.result,i.transaction,e.oldVersion)}catch(e){a(e)}},i.onsuccess=e=>{n(i.result)},i.onerror=e=>{a(e.target.error)}}))}(t);return await new Promise(((t,i)=>{let r;const o=a.transaction(n,"readonly");o.oncomplete=e=>{a.close(),t(r)},o.onerror=e=>{a.close(),i(e.target.error)};try{r=(t=>function({index:e,range:s=null,direction:t="next",forEach:n}){return new Promise(((a,i)=>{let r;const o=e.openCursor(s,t);o.onsuccess=e=>{const s=o.result;if(s){try{r=n(s.value,s)}catch(e){i(e)}s.advance(void 0===r?1:4294967295)}else a(r)},o.onerror=e=>{i(e.target.error)}}))}({index:t.objectStore("files").index("path"),range:IDBKeyRange.only(s.slice(e.length)+("/"===s.slice(-1)?"index.html":"")),forEach:e=>e}))(o)}catch(e){o.abort(),a.close(),i(e)}}))}(this.dbSchema,["files"])}}).main()})();